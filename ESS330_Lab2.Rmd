---
title: "ESS330_Lab2"
output:
  html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(readr)
library(dplyr)
library(tidyverse)
```

#Import Dataset
```{r}
trees <- read.csv("data/tree_dat.csv")
```

#Q13
```{r}
trees <- trees %>%
  rename(rad_ib_mm = rad_ib, inc_mm = inc)
```

#Q14
```{r}
trees <- trees %>%
  mutate(rad_ib_cm = rad_ib_mm/10,
         DBH_cm = rad_ib_cm*2,
         BA_m2 = 0.00007854 * DBH_cm^2)

temp <- filter(trees, species == 'POTR')
temp <- filter(temp, year == 2007)

mean(temp$BA_m2)
```

#Q15
```{r}
trees %>%
  mutate(established = if_else(age > 5, TRUE, FALSE)) %>%
  count(established)
```

#FINAL QUESTION
```{r}
temp <- trees %>%
  mutate(growth = DBH_cm - lag(DBH_cm)) %>%
  mutate(total_years = n()) %>%
  filter(total_years > 10) %>%
  filter(!is.na(growth)) %>%
  group_by(species) %>%
  summarise(mean_growth = mean(growth))
```



